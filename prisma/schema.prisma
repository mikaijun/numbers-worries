// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  // HACK: 設定した当時、ローカルでmigrateするとtime outするため、ベースのDBを変える必要があったため定義している
  // https://github.com/prisma/prisma/issues/16853#issuecomment-1398787290
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model Event {
  id                Int    @id @default(autoincrement())
  content           String @db.VarChar(255)
  created_at        DateTime
  update_at         DateTime

  @@map("event")
}

model Worry {
  id                Int    @id @default(autoincrement())
  content           String @db.VarChar(255)
  created_at        DateTime
  update_at         DateTime
  worryEventScore   WorryEventScore[]

  @@map("worry")
}

model Whish {
  id                Int    @id @default(autoincrement())
  content           String @db.VarChar(255)
  created_at        DateTime
  update_at         DateTime
  whishEventScore   WhishEventScore[]

  @@map("whish")
}

model Score {
  id                Int    @id @default(autoincrement())
  name              String @db.VarChar(255)
  created_at        DateTime
  worryEventScore   WorryEventScore[]
  whishEventScore   WhishEventScore[]

  @@map("score")
}

model WorryEventScore {
  worry             Worry @relation(fields: [worry_id], references: [id])
  worry_id          Int
  score             Score @relation(fields: [score_id], references: [id])
  score_id          Int
  created_at        DateTime
  update_at         DateTime

  @@id([worry_id, score_id])
  @@map("worry_event_score")
}

model WhishEventScore {
  whish             Whish @relation(fields: [whish_id], references: [id])
  whish_id          Int
  score             Score @relation(fields: [score_id], references: [id])
  score_id          Int
  created_at        DateTime
  update_at         DateTime

  @@id([whish_id, score_id])
  @@map("whish_event_score")
}
